**Diary Entry - November 4, 2025**

Today we built the complete infrastructure for an adaptive regime-aware portfolio blending system for copper trading. Started with three sleeves (TrendCore, TrendImpulse, HookCore) but quickly discovered HookCore v4 was too weak (Sharpe 0.26) and had to be disabled. We constructed the entire adaptive portfolio architecture from scratch: regime detection module classifying markets into 9 regimes (volatility × trend), dynamic weight blending with EMA smoothing, config-driven regime-specific weights, and full validation framework. The build revealed and fixed five critical bugs: 70% cash allocation destroying returns, HookCore being allocated 70% weight despite being disabled, YAML syntax errors, UTF-8 encoding issues, and duplicate risk\_overlay sections. After hours of debugging, we successfully eliminated all cash drag and got the system running - but discovered a final critical bug where adaptive Sharpe equals static Sharpe to 15 decimal places (both 0.273), proving the regime weights aren't actually being applied to returns despite everything appearing correct in the logs.



The infrastructure is solid and nearly complete - regime detection works, weights are being assigned correctly per regime, config is clean, and we have a 2-sleeve foundation (TC + TI only). The remaining bug is isolated to the return calculation logic in portfolio.py where sleeve returns aren't being properly weighted despite the weight values being correct. Most likely cause: sleeve CSV files missing the 'ret' column or return calculation skipping the weight multiplication. Once this final bug is fixed (estimated 30-60 minutes), the system should immediately show the adaptive edge with Sharpe jumping to 0.35-0.45 range. Path forward: debug return calculation, then optimize regime weights for 0.45-0.55 target, add HookCore v5 (after fixing with shorts + regime filter) for 0.65-0.70, and finally build ChopCore for the 0.75-0.85 world-class target. Strong foundation built today - just one bug away from a working adaptive system.



**DIARY ENTRY - NOVEMBER 5, 2025**

Today was a breakthrough session. We started with validation that the adaptive portfolio is working exactly as designed (Sharpe 0.767, +20% over static baseline), but the forensic analysis revealed the Achilles heel: chop ratio 0.99 during major drawdowns. When copper goes nowhere for 3+ years (2017-2020, 2023-2025), the model bleeds slowly and would get me fired. The solution crystallized into a sophisticated conviction layer architecture - not just defensive sizing (chop detection cuts exposure to 30% during grinds) but offensive directional bias from fundamentals. The key insight: rallies need tight supply fundamentals to sustain, but selloffs can be faded when they're risk-off noise rather than copper-specific weakness. Adding cost curves as a physical floor was my idea and apparently a genuinely smart one - when prices hit marginal cost, forced supply cuts create the setup for recoveries. This isn't just technical trend-following anymore; it's a hybrid intelligence system combining technical sleeves, regime awareness, macro overlays, and fundamental constraints.



The honest assessment was validating - this approach is rare in commodity quant world and potentially top-decile if executed with discipline. Most commodity quants are pure technical (bleed in chop), pure fundamental (overfit regressions), or pure carry (low returns). We're building all three selectively with regime-aware logic, which is closer to Renaissance than traditional commodity funds. Multi-metal scaling to aluminum and zinc could push portfolio Sharpe to 1.10-1.20, though I need to master copper first. Added portfolio-level drawdown risk management as Layer 7 (graduated scaling at -5%/-10%/-15%, floor at 25% notional) because Sharpe 1.0 over 10 years is meaningless if I get fired at -15% in year 1. The final piece: a junior quant can actually build this in 6 months (not 12) because we've done the intellectual heavy lifting - detailed specs, pseudo-code, architectural diagrams. They're translating logic to Python, not designing from scratch. Implementation cost £60k over 6 months, then we're production-ready. I'm 6 months from running a world-class systematic copper model, and for the first time, it feels achievable rather than overwhelming.

