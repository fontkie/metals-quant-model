# VolPulse (Simple) configuration — Option A: rolling quantile guardrails
# Save as: C:\Code\Metals\Docs\Copper\vol_simple\vol_pulse_simple.yaml

# --- Sizing ---
target_vol: 0.10          # portfolio target vol for sizing (10%)
size_floor: 0.3           # min size multiplier
size_cap: 3.0             # max size multiplier

# --- Windows ---
percentile_window_days: 252   # rank RV21 vs prior 252 days
guardrails_window_days: 252   # absolute guardrails over prior 252 days

# --- Absolute guardrails on RV21 (prevents silly labels when distribution shifts) ---
guardrails_mode: quantile     # quantile | median | static
calm_quantile: 0.20           # Calm guardrail = Q20 of RV21 over guardrails window
high_quantile: 0.90           # High guardrail = Q90 of RV21 over guardrails window

# --- Hysteresis for sticky edge states (percentile-based) ---
calm_percentile_in: 0.30
calm_percentile_out: 0.34
high_percentile_in: 0.70
high_percentile_out: 0.66

# --- Mid-band regime logic (Rising/Falling) ---
use_midband_slope: true       # when not Calm/High, decide by ΔRV5 slope
drv5_epsilon: 0.002           # if ΔRV5 > +ε ⇒ Rising; if ΔRV5 < −ε ⇒ Falling; else carry forward

# --- IO column mapping ---
columns:
  date: Date
  price: Price
