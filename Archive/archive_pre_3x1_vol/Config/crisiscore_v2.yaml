# CRISISCORE V2 CONFIGURATION
# Multi-dimensional crisis detection with credit stress
# Date: November 7, 2025

# Core parameters
parameters:
  lookback: 252  # 1 year for percentile calculations

# Layer 1: Credit Stress (HY Spreads) - PRIMARY SIGNAL
# Thresholds from 25-year historical analysis
credit_stress:
  normal: 495       # 60th percentile - below this is normal markets
  stress: 661       # 80th percentile - mild concern
  precrisis: 760    # 90th percentile - elevated risk
  crisis: 850       # 95th percentile - high risk
  
  # Historical context:
  # - Mean: 510 bps
  # - GFC 2008: 1,840 bps peak
  # - COVID 2020: 1,100 bps peak
  # - Enron 2002: 1,036 bps peak

# Layer 2: Velocity (HY Spread Rate of Change)
# Detects acceleration/deceleration
velocity:
  rapid_widen_10d: 80    # bps in 10 days = crisis accelerating
  rapid_widen_30d: 150   # bps in 30 days = sustained widening
  
  # From analysis:
  # - 10d 95th percentile: 64 bps
  # - 30d 95th percentile: 130 bps
  # Setting slightly above to catch true crisis acceleration

# Layer 3: VIX Stress - CONFIRMATION SIGNAL
# Now secondary, not primary
vix_stress:
  normal: 20      # Below = calm markets
  elevated: 25    # Mildly elevated
  stress: 30      # Stressed
  crisis: 40      # Crisis conditions

# Composite Score Weights
# Philosophy: HY spreads are most reliable, VIX confirms, velocity flags acceleration
composite_weights:
  credit_stress: 0.60   # PRIMARY - most stable, reliable signal
  vix_stress: 0.25      # CONFIRMATION - catches fast-moving crises
  velocity: 0.15        # ACCELERATION - flags deteriorating conditions

# Regime Classification Thresholds
# Based on composite score (0 to 1)
regime_classification:
  stress_threshold: 0.40      # Composite > 0.40 = STRESS
  precrisis_threshold: 0.60   # Composite > 0.60 = PRE_CRISIS
  crisis_threshold: 0.75      # Composite > 0.75 = CRISIS

# Position Sizing by Regime
sizing:
  normal: 1.00        # Full size
  stress: 0.75        # Mild defense (25% cut)
  precrisis: 0.50     # Moderate defense (50% cut)
  crisis: 0.25        # Deep defense (75% cut)

# Expected Distribution (from historical data)
# These are targets, not enforced
expected_distribution:
  normal: 0.60        # 60% of time
  stress: 0.20        # 20% of time
  precrisis: 0.10     # 10% of time
  crisis: 0.10        # 10% of time

# Validation Targets
# Historical crises that MUST be detected
validation_targets:
  gfc_2008:
    period: "2008-09 to 2008-11"
    expected_regime: "CRISIS"
    hy_spread_peak: 1840
    vix_peak: 80.9
    
  covid_2020:
    period: "2020-03"
    expected_regime: "CRISIS"
    hy_spread_peak: 1100
    vix_peak: 82.7
    
  europe_2011:
    period: "2011-08"
    expected_regime: "PRE_CRISIS"  # or CRISIS
    hy_spread_peak: 736
    vix_peak: 48.0
    
  enron_2002:
    period: "2002-07 to 2002-10"
    expected_regime: "CRISIS"
    hy_spread_peak: 1036
    vix_peak: 45.1
    
  dec_2018:
    period: "2018-12"
    expected_regime: "STRESS"  # Borderline pre-crisis
    hy_spread_peak: 531
    vix_peak: 36.1

# Notes on design choices
#
# Why HY spreads primary (60% weight)?
# 1. More stable than VIX (less jumpy)
# 2. Reflects actual credit conditions (real money at risk)
# 3. Strong correlation with VIX (0.776) but less noise
# 4. Leads equity volatility in some crises
#
# Why VIX secondary (25% weight)?
# 1. Catches fast-moving crises (flash crashes)
# 2. More real-time (trades continuously)
# 3. Can spike before spreads widen
# 4. Confirms HY spread signals
#
# Why velocity (15% weight)?
# 1. Detects acceleration (crisis worsening)
# 2. Detects deceleration (crisis easing)
# 3. Flags transitions early
# 4. Low weight prevents false signals from noise
#
# Four-tier system rationale:
# 1. NORMAL (60%): Business as usual, full size
# 2. STRESS (20%): Mild concern, modest defense
# 3. PRE_CRISIS (10%): Elevated risk, significant defense
# 4. CRISIS (10%): High risk, deep defense
#
# This distribution matches historical frequency and allows
# for gradual position adjustment rather than binary on/off.